<!DOCTYPE html>
<!--
  ~ Copyright (C) 2016 Singular Studios (a.k.a Atom Tecnologia) - www.opensingular.com
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<html style="height: 100%;">
<head>
    <title></title>
    <script src="/singular-static/resources/singular/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="/singular-static/resources/singular/plugins/ckeditor/ckeditor.js" type="text/javascript"></script>
    <script src="/singular-static/resources/singular/scripts/singular-resource-handler.js" type="text/javascript"></script>
    <style type="text/css">
        .cke_button__finishandclose_label,
        .cke_button__cancel_label,
        .cke_button__closed_label,
        .cke_button__teste_label,
        CSS_PLACEHOLDER {
            display: inline !important;
        }
    </style>
</head>
<body class="page-container-bg-solid page-header-fixed page-sidebar-closed-hide-logo page-md">

<script>
    SingularResourceHandler
            .addStyle("/global/plugins/bootstrap/css/bootstrap.css")
            .addStyle("/layout4/css/layout.css")
            .addStyle("/layout4/css/themes/default.css")
            .addStyle("/global/css/components-md.css")
            .setFavicon("/singular-static/resources/singular/img/favicon.png")
            .apply();
</script>
<div>
    <div class="page-header navbar navbar-fixed-top">
        <div class="page-header-inner">
            <div class="page-logo">
                <a href="#BASE_URL_PLACEHOLDER#">
                    <div class="logo-default"></div>
                </a>
            </div>
        </div>
    </div>
</div>

<div class="clearfix"></div>

<div class="page-container" style="width: 215mm; margin-right: auto; margin-left: auto">
    <textarea id="ck-text-area"></textarea>
</div>
<script type="text/javascript">

    $(document).ready(function () {
        nw.document.getElementById('ck-text-area').value = $('#' + htmlContainer);


        var plugin;
        if (isEnabled === "true") {
            plugin = 'finishAndClose,cancel';
        } else {
            nw.CKEDITOR.config.readOnly = true;
            plugin = 'closed';
        }

        var editor = nw.CKEDITOR.replace("ck-text-area", {
            extraPlugins: plugin,
            allowedContent: true,
            skin: 'office2013',
            language: 'pt-br',
            width: '215mm',
            savePlugin: {
                onSave: function (data) {
                    var jQuerRefOfHtmlContainer = $('#' + htmlContainer);
                    jQuerRefOfHtmlContainer.html(data);

                    var jQueryRefOfHiddenInput = $('#' + hiddenInput);
                    jQueryRefOfHiddenInput.val(data);
                    jQueryRefOfHiddenInput.trigger("singular:process");
                }
            },
            toolbar: [
                {name: 'document', items: ['Closed', 'FinishAndClose', 'Cancel', 'Preview', 'Print']},
                {
                    name: 'clipboard',
                    items: ['Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo']
                },
                {name: 'editing', items: ['Find', 'Replace', '-', 'Scayt']},
                {
                    name: 'basicstyles',
                    items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat']
                },
                {
                    name: 'paragraph',
                    items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock']
                },
                {name: 'links', items: ['Link', 'Unlink']},
                {name: 'insert', items: ['Table', 'HorizontalRule', 'SpecialChar', 'PageBreak']},
                '/',
                {name: 'styles', items: ['Styles', 'Format', 'FontSize']},
                {name: 'colors', items: ['TextColor', 'BGColor']},
                {name: 'tools', items: ['ShowBlocks']},
                {name: 'others', items: btnList.split(",")}
            ],
            on: {
                'instanceReady': function (evt) {
                    nw.$('.cke_contents').height(nw.$('html').height() - nw.$('.cke_contents').offset().top - nw.$('.cke_bottom').height() - 20);
                }
            }
        });

        nw.CKEDITOR.config.disableNativeSpellChecker = false;


        editor.ui.addButton('ExtraButtons3',
            {
                label: 'ExtraButtons3',
                command: 'ExtraButtons3',
                icon: 'ExtraButtons3',
                toolbar: 'ExtraButtons3'
            });
        editor.addCommand('ExtraButtons3', {
            exec: function () {
                alert("ok");
            }
        });
        editor.ui.addButton('ExtraButtons4',
            {
                label: 'ExtraButtons4',
                command: 'ExtraButtons4',
                icon: 'ExtraButtons4',
                toolbar: 'ExtraButtons4'
            });
        editor.addCommand('ExtraButtons4', {
            exec: function () {
                alert("ok");
            }
        });
        editor.ui.addButton('ExtraButtons2',
            {
                label: 'ExtraButtons2',
                command: 'ExtraButtons2',
                icon: 'ExtraButtons2',
                toolbar: 'ExtraButtons2'
            });
        editor.addCommand('ExtraButtons2', {
            exec: function () {
                alert("ok");
            }
        });
        editor.ui.addButton('ExtraButtons',
            {
                label: 'ExtraButtons',
                command: 'ExtraButtons',
                icon: 'ExtraButtons',
                toolbar: 'ExtraButtons'
            });
        editor.addCommand('ExtraButtons', {
            exec: function () {
                alert("ok");
            }
        });

        return editor;
    });
</script>
</body>
</html>