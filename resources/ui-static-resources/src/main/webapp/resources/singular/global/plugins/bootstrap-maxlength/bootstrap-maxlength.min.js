/* ========================================================== 
 * 
 * bootstrap-maxlength.js v 1.7.0 
 * Copyright 2015 Maurizio Napoleoni @mimonap
 * Licensed under MIT License
 * URL: https://github.com/mimo84/bootstrap-maxlength/blob/master/LICENSE
 *
 * ========================================================== */

!function(x){"use strict";x.event.special.destroyed||(x.event.special.destroyed={remove:function(e){e.handler&&e.handler()}}),x.fn.extend({maxlength:function(h,e){var t=x("body");function p(e){var t=e.val();t=h.twoCharLinebreak?t.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n"):t.replace(new RegExp("\r?\n","g"),"\n");return h.utf8?function(e){for(var t=0,a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t++:t+=127<n&&n<2048?2:3}return t}(t):t.length}function f(e,t){return t-p(e)}function d(e,t){t.css({display:"block"}),e.trigger("maxlength.shown")}function u(e,t,a){var n="";return h.message?n="function"==typeof h.message?h.message(e,t):h.message.replace("%charsTyped%",a).replace("%charsRemaining%",t-a).replace("%charsTotal%",t):(h.preText&&(n+=h.preText),h.showCharsTyped?n+=a:n+=t-a,h.showMaxLength&&(n+=h.separator+t),h.postText&&(n+=h.postText)),n}function g(e,t,a,n){var o,s,r,i,l,c;n&&(n.html(u(t.val(),a,a-e)),0<e?(r=t,i=h.threshold,l=a,c=!0,!h.alwaysShow&&l-p(r)>i&&(c=!1),c?d(t,n.removeClass(h.limitReachedClass).addClass(h.warningClass)):(o=t,s=n,h.alwaysShow||(s.css({display:"none"}),o.trigger("maxlength.hidden")))):d(t,n.removeClass(h.warningClass).addClass(h.limitReachedClass))),h.customMaxAttribute&&(e<0?t.addClass("overmax"):t.removeClass("overmax"))}function m(e,t){var a,n,o=(n=(a=e)[0],x.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():{width:n.offsetWidth,height:n.offsetHeight},a.offset()));if("function"!==x.type(h.placement))if(x.isPlainObject(h.placement))!function(e,t){if(!e||!t)return;var n={};x.each(["top","bottom","left","right","position"],function(e,t){var a=h.placement[t];void 0!==a&&(n[t]=a)}),t.css(n)}(h.placement,t);else{var s=e.outerWidth(),r=t.outerWidth(),i=t.width(),l=t.height();switch(h.appendToParent&&(o.top-=e.parent().offset().top,o.left-=e.parent().offset().left),h.placement){case"bottom":t.css({top:o.top+o.height,left:o.left+o.width/2-i/2});break;case"top":t.css({top:o.top-l,left:o.left+o.width/2-i/2});break;case"left":t.css({top:o.top+o.height/2-l/2,left:o.left-i});break;case"right":t.css({top:o.top+o.height/2-l/2,left:o.left+o.width});break;case"bottom-right":t.css({top:o.top+o.height,left:o.left+o.width});break;case"top-right":t.css({top:o.top-l,left:o.left+s});break;case"top-left":t.css({top:o.top-l,left:o.left-r});break;case"bottom-left":t.css({top:o.top+e.outerHeight(),left:o.left-r});break;case"centered-right":t.css({top:o.top+l/2,left:o.left+s-r-3});break;case"bottom-right-inside":t.css({top:o.top+o.height,left:o.left+o.width-r});break;case"top-right-inside":t.css({top:o.top-l,left:o.left+s-r});break;case"top-left-inside":t.css({top:o.top-l,left:o.left});break;case"bottom-left-inside":t.css({top:o.top+e.outerHeight(),left:o.left})}}else h.placement(e,t,o)}function b(e){var t=e.attr("maxlength")||h.customMaxAttribute;if(h.customMaxAttribute&&!h.allowOverMax){var a=e.attr(h.customMaxAttribute);(!t||a<t)&&(t=a)}return t||(t=e.attr("size")),t}return x.isFunction(h)&&!e&&(e=h,h={}),h=x.extend({showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",message:null,showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1,twoCharLinebreak:!0,customMaxAttribute:null,allowOverMax:!1},h),this.each(function(){var i,l,c=x(this);function e(){var e=u(c.val(),i,"0");i=b(c),l||(l=x('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(e)),c.is("textarea")&&(c.data("maxlenghtsizex",c.outerWidth()),c.data("maxlenghtsizey",c.outerHeight()),c.mouseup(function(){c.outerWidth()===c.data("maxlenghtsizex")&&c.outerHeight()===c.data("maxlenghtsizey")||m(c,l),c.data("maxlenghtsizex",c.outerWidth()),c.data("maxlenghtsizey",c.outerHeight())})),h.appendToParent?(c.parent().append(l),c.parent().css("position","relative")):t.append(l),g(f(c,b(c)),c,i,l),m(c,l)}x(window).resize(function(){l&&m(c,l)}),h.showOnReady?c.ready(function(){e()}):c.focus(function(){e()}),c.on("maxlength.reposition",function(){m(c,l)}),c.on("destroyed",function(){l&&l.remove()}),c.on("blur",function(){!l||h.showOnReady||h.alwaysShow||l.remove()}),c.on("input",function(){var e,t,a,n,o=b(c),s=f(c,o),r=!0;return h.validate&&s<0?(t=o,a=(e=c).val(),n=0,h.twoCharLinebreak&&"\n"===(a=a.replace(/\r(?!\n)|\n(?!\r)/g,"\r\n")).substr(a.length-1)&&a.length%2==1&&(n=1),e.val(a.substr(0,t-n)),r=!1):g(s,c,i,l),("bottom-right-inside"===h.placement||"top-right-inside"===h.placement||"function"==typeof h.placement||h.message&&"function"==typeof h.message)&&m(c,l),r})})}})}(jQuery);